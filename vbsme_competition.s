#  Fall 2025
#  Team Members:    Candice Liu, Andrew Ghartey, Barack Marwanga Asande
#  % Effort    :    33%, 33%, 33%
#
# ECE369A,  
# 

########################################################################################################################
### data
########################################################################################################################
.data
# test input
# asize : dimensions of the frame [i, j] and window [k, l]
#         i: number of rows,  j: number of cols
#         k: number of rows,  l: number of cols  
# frame : frame data with i*j number of pixel values
# window: search window with k*l number of pixel values
#
# $v0 is for row / $v1 is for column


# test 1 For the 64X64 frame and a 4X4 window size
# 
asize1: .word    64,   64,   4,   4    #i,   j,   k,   l
frame1: .word 255,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  
	.word 240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  250,  
	.word 242,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  236,  249,  
	.word 243,  234,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  230,  235,  248,  
	.word 244,  235,  234,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  232,  229,  234,  247,  
	.word 245,  236,  235,  242,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  242,  231,  228,  233,  246,  
	.word 246,  237,  236,  243,  228,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  227,  230,  241,  230,  227,  232,  245,  
	.word 247,  238,  237,  244,  229,  252,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  226,  229,  240,  229,  226,  231,  244,  
	.word 248,  239,  238,  245,  230,  253,  254,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  230,  225,  228,  239,  228,  225,  230,  243,  
	.word 249,  240,  239,  246,  231,  254,  225,  234,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  
	.word 250,  241,  240,  247,  232,  225,  226,  235,  252,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  
	.word 251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  
	.word 252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  
	.word 253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  
	.word 254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  
	.word 225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  
	.word 226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  
	.word 227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  236,  249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  
	.word 228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  234,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  230,  235,  248,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  
	.word 229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  244,  235,  234,  240,  101,  101,  101,  101,  235,  234,  233,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  232,  229,  234,  247,  238,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  
	.word 230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  232,  245,  236,  235,  242,  101,  101,  101,  101,  252,  251,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  242,  231,  228,  233,  246,  237,  236,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  
	.word 231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  228,  233,  246,  237,  236,  243,  101,  101,  101,  101,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  232,  231,  230,  229,  227,  230,  241,  230,  227,  232,  245,  236,  235,  242,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  
	.word 232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  232,  229,  234,  247,  238,  237,  244,  101,  101,  101,  101,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  226,  229,  240,  229,  226,  231,  244,  235,  234,  241,  226,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  
	.word 233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  244,  233,  230,  235,  248,  239,  238,  245,  230,  253,  254,  232,  231,  230,  229,  228,  227,  226,  225,  254,  253,  252,  251,  250,  249,  248,  247,  246,  245,  243,  230,  225,  228,  239,  228,  225,  230,  243,  234,  233,  240,  225,  248,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  
	.word 234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  234,  245,  234,  231,  236,  249,  240,  239,  246,  231,  254,  225,  234,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  233,  232,  239,  254,  247,  248,  227,  244,  239,  242,  253,  242,  239,  244,  227,  
	.word 235,  226,  225,  232,  247,  240,  241,  250,  237,  232,  235,  246,  235,  232,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  246,  245,  244,  243,  242,  241,  240,  239,  238,  237,  236,  235,  234,  233,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  232,  231,  238,  253,  246,  247,  226,  243,  238,  241,  252,  241,  238,  243,  226,  
	.word 236,  227,  226,  233,  248,  241,  242,  251,  238,  233,  236,  247,  236,  233,  238,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  250,  249,  248,  247,  246,  245,  244,  243,  242,  241,  240,  239,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  231,  230,  237,  252,  245,  246,  225,  242,  237,  240,  251,  240,  237,  242,  225,  
	.word 237,  228,  227,  234,  249,  242,  243,  252,  239,  234,  237,  248,  237,  234,  239,  252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  232,  231,  230,  229,  228,  227,  226,  225,  100,  100,  100,  100,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  230,  229,  236,  251,  244,  245,  254,  241,  236,  239,  250,  239,  236,  241,  254,  
	.word 238,  229,  228,  235,  250,  243,  244,  253,  240,  235,  238,  249,  238,  235,  240,  253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  252,  251,  250,  249,  248,  247,  246,  100,  99,  100,  100,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  229,  228,  235,  250,  243,  244,  253,  240,  235,  238,  249,  238,  235,  240,  253,  
	.word 239,  230,  229,  236,  251,  244,  245,  254,  241,  236,  239,  250,  239,  236,  241,  254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  250,  249,  248,  120,  120,  245,  100,  100,  99,  100,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  228,  227,  234,  249,  242,  243,  252,  239,  234,  237,  248,  237,  234,  239,  252,  
	.word 240,  231,  230,  237,  252,  245,  246,  225,  242,  237,  240,  251,  240,  237,  242,  225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  226,  225,  120,  120,  120,  100,  100,  100,  100,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  227,  226,  233,  248,  241,  242,  251,  238,  233,  236,  247,  236,  233,  238,  251,  
	.word 241,  232,  231,  238,  253,  246,  247,  226,  243,  238,  241,  252,  241,  238,  243,  226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  240,  239,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  226,  225,  232,  247,  240,  241,  250,  237,  232,  235,  246,  235,  232,  237,  250,  
	.word 242,  233,  232,  239,  254,  247,  248,  227,  244,  239,  242,  253,  242,  239,  244,  227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  101,  120,  120,  120,  120,  120,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  234,  245,  234,  231,  236,  249,  
	.word 243,  234,  233,  240,  225,  248,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  120,  120,  120,  120,  120,  120,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  244,  233,  230,  235,  248,  
	.word 244,  235,  234,  241,  226,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  120,  120,  120,  120,  120,  120,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  232,  229,  234,  247,  
	.word 245,  236,  235,  242,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  229,  120,  120,  120,  120,  120,  120,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  228,  233,  246,  
	.word 246,  237,  236,  243,  228,  251,  252,  231,  248,  243,  246,  227,  246,  243,  248,  231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  233,  234,  120,  120,  120,  120,  120,  120,  241,  227,  250,  251,  230,  247,  242,  245,  226,  245,  242,  247,  230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  232,  245,  
	.word 247,  238,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  245,  246,  247,  120,  120,  120,  101,  252,  253,  254,  225,  249,  250,  229,  246,  241,  244,  225,  244,  241,  246,  229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  244,  
	.word 248,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  249,  228,  245,  240,  243,  254,  243,  240,  245,  228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  
	.word 249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  227,  244,  239,  242,  253,  242,  239,  244,  227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  
	.word 250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  226,  225,  232,  247,  240,  241,  250,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  243,  238,  241,  252,  241,  238,  243,  226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  
	.word 251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  227,  226,  233,  248,  241,  242,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  237,  240,  251,  240,  237,  242,  225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  
	.word 252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  228,  227,  234,  249,  242,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  239,  250,  239,  236,  241,  254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  
	.word 253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  229,  228,  235,  250,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  249,  238,  235,  240,  253,  244,  243,  250,  235,  228,  229,  238,  225,  250,  253,  234,  253,  250,  225,  238,  
	.word 254,  245,  244,  251,  236,  229,  230,  239,  226,  251,  254,  235,  254,  251,  226,  239,  230,  229,  236,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  237,  234,  239,  252,  243,  242,  249,  234,  227,  228,  237,  254,  249,  252,  233,  252,  249,  254,  237,  
	.word 225,  246,  245,  252,  237,  230,  231,  240,  227,  252,  225,  236,  225,  252,  227,  240,  231,  230,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  233,  238,  251,  242,  241,  248,  233,  226,  227,  236,  253,  248,  251,  232,  251,  248,  253,  236,  
	.word 226,  247,  246,  253,  238,  231,  232,  241,  228,  253,  226,  237,  226,  253,  228,  241,  232,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  237,  250,  241,  240,  247,  232,  225,  226,  235,  252,  247,  250,  231,  250,  247,  252,  235,  
	.word 227,  248,  247,  254,  239,  232,  233,  242,  229,  254,  227,  238,  227,  254,  229,  242,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  249,  240,  239,  246,  231,  254,  225,  234,  251,  246,  249,  230,  249,  246,  251,  234,  
	.word 228,  249,  248,  225,  240,  233,  234,  243,  230,  225,  228,  239,  228,  225,  230,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  239,  238,  245,  230,  253,  254,  233,  250,  245,  248,  229,  248,  245,  250,  233,  
	.word 229,  250,  249,  226,  241,  234,  235,  244,  231,  226,  229,  240,  229,  226,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  237,  244,  229,  252,  253,  232,  249,  244,  247,  228,  247,  244,  249,  232,  
	.word 230,  251,  250,  227,  242,  235,  236,  245,  232,  227,  230,  241,  230,  227,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  243,  102,  102,  102,  102,  248,  243,  246,  227,  246,  243,  248,  231,  
	.word 231,  252,  251,  228,  243,  236,  237,  246,  233,  228,  231,  242,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  102,  102,  102,  102,  247,  242,  245,  226,  245,  242,  247,  230,  
	.word 232,  253,  252,  229,  244,  237,  238,  247,  234,  229,  232,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  102,  102,  102,  102,  246,  241,  244,  225,  244,  241,  246,  229,  
	.word 233,  254,  253,  230,  245,  238,  239,  248,  235,  230,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  102,  102,  102,  102,  245,  240,  243,  254,  243,  240,  245,  228,  
	.word 234,  225,  254,  231,  246,  239,  240,  249,  236,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  227,  244,  239,  242,  253,  242,  239,  244,  227,  
	.word 235,  226,  225,  232,  247,  240,  241,  250,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  243,  238,  241,  252,  241,  238,  243,  226,  
	.word 236,  227,  226,  233,  248,  241,  242,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  237,  240,  251,  240,  237,  242,  225,  
	.word 237,  228,  227,  234,  249,  242,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  239,  250,  239,  236,  241,  254,  
	.word 238,  229,  228,  235,  250,  243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  249,  238,  235,  240,  253,  
	.word 239,  230,  229,  236,  251,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  237,  234,  239,  252,  
	.word 240,  231,  230,  237,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  233,  238,  251,  
	.word 241,  232,  231,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  237,  250,  
	.word 242,  233,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  249,  
	.word 243,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247,  248,  249,  250,  251,  252,  253,  254,  225,  226,  227,  228,  229,  230,  231,  232,  233,  234,  235,  236,  237,  238,  239,  240,  241,  242,  243,  244,  245,  246,  247
                  
window1: .word    99,  99,  99,  99,   
          .word    99,  99,  99,  99,   
          .word    99,  99,  99,  99,   
           .word   99,  99,  99,  99
			




         
newline: .asciiz     "\n" 


########################################################################################################################
### main
########################################################################################################################

.text

.globl main

main:
	addi    $sp, $sp, -4		# Make space on stack
    sw      $ra, 0($sp)			# Save return address

    #la      $a0, asize1     # 1st parameter: address of asize1[0]
    #la      $a1, frame1     # 2nd parameter: address of frame1[0]
    #la      $a2, window1    # 3rd parameter: address of window1[0] 
	addi    $a0, $zero, 0       # Address of asize1
    addi    $a1, $zero, 16      # Address of frame1
    addi    $a2, $zero, 16400   # Address of window1

	jal		vbsme
#	jal		print_result

	lw      $ra, 0($sp)         # Restore return address
    addi    $sp, $sp, 4         # Restore stack pointer
    j       end_program         # Return

end_program:                    # remain in infinite loop
	j end_program


################### Print Result ####################################
#print_result:
    # Printing $v0
 #   add     $a0, $v0, $zero     # Load $v0 for printing
 #   li      $v0, 1              # Load the system call numbers
 #   syscall
   
    # Print newline.
 #   la      $a0, newline          # Load value for printing
 #   li      $v0, 4                # Load the system call numbers
 #   syscall
   
    # Printing $v1
 #   add     $a0, $v1, $zero      # Load $v1 for printing
 #   li      $v0, 1                # Load the system call numbers
 #   syscall

    # Print newline.
 #   la      $a0, newline          # Load value for printing
 #   li      $v0, 4                # Load the system call numbers
 #   syscall
   
    # Print newline.
 #   la      $a0, newline          # Load value for printing
 #   li      $v0, 4                # Load the system call numbers
 #   syscall
   
 #   jr      $ra                   #function return

#####################################################################
### vbsme
#####################################################################

.text
.globl  vbsme

vbsme:  
    addi      $v0, $zero, 0              # reset $v0 and $V1
    addi      $v1, $zero, 0
	
    #jr $ra 

    # Prologue: save callee-saved regs (we use s0-s7)
    # Reserve 40 bytes for 10 registers (8 s-registers, $ra, and possible alignment/padding) 
    addi   $sp, $sp, -40
    sw     $s7,  0($sp)
    sw     $s6,  4($sp)
    sw     $s5,  8($sp)
    sw     $s4, 12($sp)
    sw     $s3, 16($sp)
    sw     $s2, 20($sp)
    sw     $s1, 24($sp)
    sw     $s0, 28($sp)
    sw     $ra, 32($sp)

    # Loading i, j, k, l from asize[] 
    lw      $s0, 0($a0)       # s0 = i (frame rows)
    lw      $s1, 4($a0)       # s1 = j (frame cols)
    lw      $s2, 8($a0)       # s2 = k (window rows)
    lw      $s3, 12($a0)      # s3 = l (window cols)

    # Finding the scan limits
    # store $s4, $s5 in a temporary storage - Andrew

    sub    $s4, $s0, $s2     # s4 = maxRow (i-k)
    sub    $s5, $s1, $s3     # s5 = maxCol (j-l)

    # Initilizing the best result and current position
    addi    $t8, $zero, 32767   # t8 = minSad = "infinity" 
    addi    $s6, $zero, 0        # s6 = bestRow 
    addi    $s7, $zero, 0        # s7 = bestCol
    addi    $t0, $zero, 0        # t0 = row = 0
    addi    $t1, $zero, 0        # t1 = col = 0
    addi    $t2, $zero, 0            # t2 = dirDown (1 => moving down-left; 0 => up-right)

ZZ_LOOP_EVAL:
    # Check if max row or col reached
    bne    $t0, $s4, CONTINUE_SCAN
    bne    $t1, $s5, CONTINUE_SCAN
    j      ZZ_FINISH

CONTINUE_SCAN:
    addi   $t9, $zero, 0        # $t9 holds curr SAD value        
    addi   $t3, $zero, 0        

SAD_ROW_LOOP:
    # Compute SAD
    beq    $t3, $s2, SAD_DONE    
    addi   $t4, $zero, 0            

SAD_COL_LOOP:
    beq    $t4, $s3, SAD_ROW_NEXT    

    add    $t5, $t0, $t3        
    mul    $t6, $t5, $s1        
    add    $t7, $t1, $t4        
    add    $t6, $t6, $t7        
    sll    $t6, $t6, 2          
    add    $t6, $a1, $t6        
    lw     $t5, 0($t6)          

    mul    $t6, $t3, $s3
    add    $t6, $t6, $t4
    sll    $t6, $t6, 2
    add    $t6, $a2, $t6        
    lw     $t7, 0($t6)          

    sub    $t6, $t5, $t7        
    bltz   $t6, SAD_ABS_NEG
SAD_ABS_OK:
    j      SAD_ACCUM
SAD_ABS_NEG:
    sub    $t6, $zero, $t6      

SAD_ACCUM:
    add    $t9, $t9, $t6        
    addi   $t4, $t4, 1          
    j      SAD_COL_LOOP

SAD_ROW_NEXT:
    addi   $t3, $t3, 1          
    j      SAD_ROW_LOOP

SAD_DONE:
    # Compare / record best
    beq    $t9, $t8, DO_UPDATE
    slt    $t5, $t9, $t8 
    beq    $t5, $zero, ZZ_NEXT_STEP
DO_UPDATE:
    addi   $t8, $t9, 0            
    addi   $s6, $t0, 0             
    addi   $s7, $t1, 0             

ZZ_NEXT_STEP:
    # Zigzag navigation
    beq    $t2, $zero, ZZ_MOVE_UPRIGHT

    beq    $t0, $s4, ZZ_HIT_BOTTOM_DL    
    beq    $t1, $zero, ZZ_HIT_LEFT_DL    
    addi   $t0, $t0, 1                   
    addi   $t1, $t1, -1                  
    j      ZZ_LOOP_EVAL

ZZ_HIT_BOTTOM_DL:
    addi   $t1, $t1, 1                   
    addi   $t2, $zero, 0                
    j      ZZ_LOOP_EVAL

ZZ_HIT_LEFT_DL:
    addi   $t0, $t0, 1                   
    addi   $t2, $zero, 0                    
    j      ZZ_LOOP_EVAL

ZZ_MOVE_UPRIGHT:
    beq    $t1, $s5, ZZ_HIT_RIGHT_UR     
    beq    $t0, $zero, ZZ_HIT_TOP_UR     
    addi   $t0, $t0, -1                  
    addi   $t1, $t1, 1                   
    j      ZZ_LOOP_EVAL

ZZ_HIT_RIGHT_UR:
    addi   $t0, $t0, 1                   
    addi   $t2, $zero, 1                        
    j      ZZ_LOOP_EVAL

ZZ_HIT_TOP_UR:
    addi   $t1, $t1, 1                   
    addi   $t2, $zero, 1                 
    j      ZZ_LOOP_EVAL

ZZ_FINISH:
    # Write return values 
    addi    $v0, $s6, 0        # best row
    addi    $v1, $s7, 0        # best col

    # Epilogue: restore and return 
    lw      $ra, 32($sp)     
    lw      $s0, 28($sp)    
    lw      $s1, 24($sp)     
    lw      $s2, 20($sp)     
    lw      $s3, 16($sp)    
    lw      $s4, 12($sp)     
    lw      $s5,  8($sp)     
    lw      $s6,  4($sp)     
    lw      $s7,  0($sp)
    addi    $sp, $sp, 40
    jr      $ra
